import{r as n,j as e,b as u}from"./index-TzOn1TcA.js";import{f as b}from"./format-CS6GGukx.js";import{f}from"./index-BAgxTVAR.js";const j=40,i=["text-blue-600 dark:text-blue-400","text-green-600 dark:text-green-400","text-red-600 dark:text-red-400","text-amber-600 dark:text-amber-400","text-violet-600 dark:text-violet-400","text-teal-600 dark:text-teal-400","text-pink-600 dark:text-pink-400","text-indigo-600 dark:text-indigo-400","text-emerald-600 dark:text-emerald-400","text-orange-600 dark:text-orange-400","text-cyan-600 dark:text-cyan-400","text-fuchsia-600 dark:text-fuchsia-400","text-rose-600 dark:text-rose-400","text-sky-600 dark:text-sky-400","text-lime-600 dark:text-lime-400"];function N(r){let a=0;for(let s=0;s<r.length;s++)a=(a<<5)-a+r.charCodeAt(s)|0;return Math.abs(a)}function m(r){return!r||r==="—"?"text-gray-600 dark:text-gray-400":i[N(r)%i.length]}function v({showTitle:r=!0}){const[a,s]=n.useState([]),[g,o]=n.useState(!0);if(n.useEffect(()=>{async function t(){o(!0);try{const{trades:d}=await u.getTape(j);s(d??[])}catch(d){console.error("Failed to load trade tape:",d),s([])}finally{o(!1)}}t()},[]),g)return e.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800/80 shadow-sm p-4",children:[r&&e.jsx("h2",{className:"text-sm font-bold text-gray-600 dark:text-gray-400 mb-3",children:"Trade tape"}),e.jsx("div",{className:"animate-pulse space-y-3",children:[1,2,3,4,5].map(t=>e.jsx("div",{className:"h-12 bg-gray-200 dark:bg-gray-700 rounded-lg"},t))})]});if(a.length===0)return e.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800/80 shadow-sm p-6",children:[r&&e.jsx("h2",{className:"text-sm font-bold text-gray-600 dark:text-gray-400 mb-3",children:"Trade tape"}),e.jsxs("div",{className:"flex flex-col items-center justify-center py-10 text-center",children:[e.jsx("svg",{className:"w-10 h-10 text-gray-300 dark:text-gray-600 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":!0,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No recent trades"})]})]});const y=!r;return e.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800/80 shadow-sm overflow-hidden",children:[r&&e.jsx("h2",{className:"text-sm font-bold text-gray-600 dark:text-gray-400 px-4 pt-3 pb-2",children:"Trade tape"}),e.jsx("div",{className:`px-3 sm:px-4 ${y?"py-3":"py-2 max-h-[280px] overflow-y-auto"}`,children:e.jsx("div",{className:"space-y-2",children:a.map(t=>{const d=t.buyer_username??"—",x=t.seller_username??"—",l=t.contracts,h=l===1?"share":"shares",p=t.outcome_name||t.outcome_ticker||t.outcome||"—",c=t.market_short_name||t.market_id||"—",k=t.create_time?f(new Date(t.create_time*1e3),"M/d h:mm a"):"—";return e.jsxs("div",{className:"rounded-lg border border-gray-100 dark:border-gray-700 bg-gray-50/80 dark:bg-gray-700/30 overflow-hidden border-l-4 border-l-green-500 dark:border-l-green-500",children:[e.jsxs("div",{className:"px-3 sm:px-4 py-3 text-sm text-gray-800 dark:text-gray-200 leading-snug",children:[e.jsx("span",{className:`font-medium ${m(d)}`,children:d})," bought ",e.jsx("span",{className:"font-bold text-gray-900 dark:text-gray-100",children:l})," ",h," of ",e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:p})," at ",e.jsx("span",{className:"font-bold text-gray-900 dark:text-gray-100",children:b(t.price)})," from ",e.jsx("span",{className:`font-medium ${m(x)}`,children:x}),"."]}),e.jsxs("div",{className:"px-3 sm:px-4 py-2 flex items-center justify-between gap-2 border-t border-gray-100 dark:border-gray-600/50",children:[e.jsx("span",{className:"truncate min-w-0 text-xs text-gray-500 dark:text-gray-400",title:c,children:c}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap flex-shrink-0 px-2 py-0.5 rounded bg-gray-200/80 dark:bg-gray-600/50",children:k})]})]},t.id)})})})]})}function L(){return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Trade tape"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Recent activity across all markets"})]}),e.jsx(v,{showTitle:!1})]})}export{L as TapePage};
