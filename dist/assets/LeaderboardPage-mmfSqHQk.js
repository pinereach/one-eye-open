import{u as se,r as o,j as e,N as ae,b as de}from"./index-BTwzOfe7.js";import{C as ne,b as oe}from"./Card-D96WZEWZ.js";import{P as le}from"./PullToRefresh-Bs-dRHtB.js";function d(h,n=!1){const C=h/100,j=Math.abs(C).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2});return n?h>=0?`+$${j}`:`-$${j}`:`$${j}`}const ce="shares_traded",xe="desc";function pe(){const{user:h}=se(),[n,C]=o.useState([]),[x,j]=o.useState(0),[m,R]=o.useState(0),[u,W]=o.useState(0),[p,q]=o.useState(0),[$,G]=o.useState({}),[P,I]=o.useState([]),[U,H]=o.useState(0),[v,J]=o.useState(0),[B,K]=o.useState({}),[z,Q]=o.useState({}),[O,V]=o.useState([]),[T,X]=o.useState([]),[Y,A]=o.useState(!0),[D,E]=o.useState(null),[l,Z]=o.useState(ce),[c,M]=o.useState(xe),[L,w]=o.useState(!1),S=o.useMemo(()=>{if(n.length===0)return[];const t=l,a=c==="asc"?1:-1;return[...n].sort((s,r)=>{let y=0;if(t==="username")y=(s.username??"").localeCompare(r.username??"");else{const f=t==="portfolio_value_cents"?s.portfolio_value_cents:t==="closed_profit_cents"?s.closed_profit_cents:t==="settled_profit_cents"?s.settled_profit_cents:t==="trade_count"?s.trade_count:t==="open_orders_count"?s.open_orders_count:s.shares_traded,_=t==="portfolio_value_cents"?r.portfolio_value_cents:t==="closed_profit_cents"?r.closed_profit_cents:t==="settled_profit_cents"?r.settled_profit_cents:t==="trade_count"?r.trade_count:t==="open_orders_count"?r.open_orders_count:r.shares_traded;y=f-_}return y*a})},[n,l,c]);function b(t){l===t?M(a=>a==="asc"?"desc":"asc"):(Z(t),M(t==="username"?"asc":"desc"))}async function F(){A(!0),E(null);try{const t=await de.adminGetLeaderboard(),{leaderboard:a,unattributed_portfolio_value_cents:s,unattributed_closed_profit_cents:r,unattributed_settled_profit_cents:y,system_total_portfolio_value_cents:f,pnl_by_outcome:_,position_contributions:k,system_total_closed_profit_cents:N,system_total_settled_profit_cents:i,closed_profit_by_outcome:g,settled_profit_by_outcome:ee,closed_profit_contributions:te,settled_profit_contributions:re}=t;C(a??[]),j(s??0),R(r??0),W(y??0),q(f??0),G(_??{}),I(k??[]),H(N??0),J(i??0),K(g??{}),Q(ee??{}),V(te??[]),X(re??[])}catch(t){console.error("Failed to load leaderboard:",t),E(t instanceof Error?t.message:"Failed to load leaderboard")}finally{A(!1)}}return o.useEffect(()=>{h?.admin&&F()},[h?.admin]),h&&!h.admin?e.jsx(ae,{to:"/markets",replace:!0}):Y&&n.length===0?e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Leaderboard"}),e.jsx("div",{className:"animate-pulse space-y-2",children:[1,2,3,4,5].map(t=>e.jsx("div",{className:"h-14 bg-gray-200 dark:bg-gray-700 rounded-lg"},t))})]}):D?e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Leaderboard"}),e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:D})]}):e.jsx(le,{onRefresh:F,children:e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Leaderboard"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Per-user stats: trades, open orders, shares traded, closed profit (realized P&L), settled profit, portfolio value. Portfolio value is zero-sum (system total should be $0); closed profit total may be non-zero."}),n.length>0&&e.jsxs("div",{className:`rounded-lg border ${p===0?"border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-800/80":"border-amber-400 dark:border-amber-500 bg-amber-50 dark:bg-amber-900/20"}`,children:[e.jsxs("button",{type:"button",onClick:()=>w(t=>!t),className:"w-full flex items-center justify-between gap-2 p-4 text-left hover:bg-gray-100/80 dark:hover:bg-gray-700/50 rounded-lg transition-colors","aria-expanded":L,children:[e.jsx("span",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:"Debug checks"}),e.jsx("svg",{className:`w-4 h-4 text-gray-500 dark:text-gray-400 flex-shrink-0 transition-transform ${L?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":!0,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),L&&e.jsxs("div",{className:"px-4 pb-4 pt-0",children:[e.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-1 text-sm",children:[e.jsxs("span",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"System total (sum of all position P&L):"})," ",e.jsx("span",{className:`font-semibold ${p===0?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400"}`,children:d(p,!0)}),p!==0&&e.jsx("span",{className:"ml-2 text-amber-600 dark:text-amber-400 text-xs",children:"(should be $0 — check trade/position logic)"})]}),e.jsxs("span",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Users + Unattributed:"})," ",e.jsx("span",{className:`font-semibold ${n.reduce((t,a)=>t+a.portfolio_value_cents,0)+x===p?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400"}`,children:d(n.reduce((t,a)=>t+a.portfolio_value_cents,0)+x,!0)}),n.reduce((t,a)=>t+a.portfolio_value_cents,0)+x!==p&&e.jsx("span",{className:"ml-2 text-amber-600 dark:text-amber-400 text-xs",children:"(should equal system total)"})]})]}),p!==0&&(Object.keys($).length>0||P.length>0)&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-2",children:"Where the imbalance comes from"}),Object.keys($).length>0&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"P&L by outcome (should be $0 per outcome in zero-sum):"}),e.jsx("ul",{className:"mt-1 space-y-0.5 text-sm font-mono",children:Object.entries($).filter(([,t])=>t!==0).sort((t,a)=>Math.abs(a[1])-Math.abs(t[1])).map(([t,a])=>e.jsxs("li",{className:a>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:[t,": ",d(a,!0)]},t))})]}),P.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Top position contributions (user_id, outcome, P&L):"}),e.jsx("ul",{className:"mt-1 space-y-0.5 text-sm font-mono max-h-40 overflow-y-auto",children:P.slice(0,20).map((t,a)=>e.jsxs("li",{className:t.contribution_cents>0?"text-green-600 dark:text-green-400":t.contribution_cents<0?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400",children:["user ",t.user_id??"null"," · ",t.outcome,": ",d(t.contribution_cents,!0)]},a))})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-2",children:"Closed / settled profit"}),e.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-1 text-sm mb-2",children:[e.jsxs("span",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"System total closed:"})," ",e.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:d(U,!0)}),e.jsx("span",{className:"ml-2 text-gray-500 dark:text-gray-400 text-xs",children:"(per-user realized P&L; total may be non-zero)"})]}),e.jsxs("span",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"System total settled:"})," ",e.jsx("span",{className:`font-semibold ${v===0?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400"}`,children:d(v,!0)}),v!==0&&e.jsx("span",{className:"ml-2 text-amber-600 dark:text-amber-400 text-xs",children:"(should be $0)"})]})]}),U!==0&&(Object.keys(B).length>0||O.length>0)&&e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Closed by outcome (non-zero):"}),e.jsx("ul",{className:"mt-1 space-y-0.5 text-sm font-mono",children:Object.entries(B).filter(([,t])=>t!==0).sort((t,a)=>Math.abs(a[1])-Math.abs(t[1])).map(([t,a])=>e.jsxs("li",{className:a>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:[t,": ",d(a,!0)]},t))}),O.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400 block mt-1",children:"Top closed profit contributions:"}),e.jsx("ul",{className:"mt-0.5 space-y-0.5 text-sm font-mono max-h-32 overflow-y-auto",children:O.slice(0,15).map((t,a)=>e.jsxs("li",{className:t.closed_profit_cents>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:["user ",t.user_id??"null"," · ",t.outcome,": ",d(t.closed_profit_cents,!0)]},a))})]})]}),v!==0&&(Object.keys(z).length>0||T.length>0)&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Settled by outcome (non-zero):"}),e.jsx("ul",{className:"mt-1 space-y-0.5 text-sm font-mono",children:Object.entries(z).filter(([,t])=>t!==0).sort((t,a)=>Math.abs(a[1])-Math.abs(t[1])).map(([t,a])=>e.jsxs("li",{className:a>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:[t,": ",d(a,!0)]},t))}),T.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400 block mt-1",children:"Top settled profit contributions:"}),e.jsx("ul",{className:"mt-0.5 space-y-0.5 text-sm font-mono max-h-32 overflow-y-auto",children:T.slice(0,15).map((t,a)=>e.jsxs("li",{className:t.settled_profit_cents>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",children:["user ",t.user_id??"null"," · ",t.outcome,": ",d(t.settled_profit_cents,!0)]},a))})]})]})]})]})]}),e.jsx("div",{className:"md:hidden space-y-3",children:S.length===0?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 py-4",children:"No users."}):S.map(t=>e.jsx(ne,{children:e.jsxs(oe,{className:"p-4",children:[e.jsx("div",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-3",children:t.username}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Trades"}),e.jsx("span",{className:"text-right font-medium",children:t.trade_count}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Open orders"}),e.jsx("span",{className:"text-right font-medium",children:t.open_orders_count}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Shares traded"}),e.jsx("span",{className:"text-right font-medium",children:t.shares_traded}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Closed profit"}),e.jsx("span",{className:`text-right font-medium ${t.closed_profit_cents>0?"text-green-600 dark:text-green-400":t.closed_profit_cents<0?"text-red-600 dark:text-red-400":""}`,children:d(t.closed_profit_cents,!0)}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Settled profit"}),e.jsx("span",{className:`text-right font-medium ${t.settled_profit_cents>0?"text-green-600 dark:text-green-400":t.settled_profit_cents<0?"text-red-600 dark:text-red-400":""}`,children:d(t.settled_profit_cents,!0)}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Portfolio value"}),e.jsx("span",{className:`text-right font-medium ${t.portfolio_value_cents>0?"text-green-600 dark:text-green-400":t.portfolio_value_cents<0?"text-red-600 dark:text-red-400":""}`,children:d(t.portfolio_value_cents,!0)})]})]})},t.user_id))}),n.length>0&&(()=>{const t=n.reduce((s,r)=>s+r.portfolio_value_cents,0),a=t+x;return e.jsxs("div",{className:"md:hidden rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-800/80 p-4",children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-2",children:"Summary (all participants)"}),e.jsxs("div",{className:"flex flex-wrap gap-x-6 gap-y-1 text-sm",children:[e.jsxs("span",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Trades:"})," ",e.jsx("span",{className:"font-semibold",children:n.reduce((s,r)=>s+r.trade_count,0)})]}),e.jsxs("span",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Open orders:"})," ",e.jsx("span",{className:"font-semibold",children:n.reduce((s,r)=>s+r.open_orders_count,0)})]}),e.jsxs("span",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Shares traded:"})," ",e.jsx("span",{className:"font-semibold",children:n.reduce((s,r)=>s+r.shares_traded,0)})]}),e.jsxs("span",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Closed profit (users):"})," ",e.jsx("span",{className:`font-semibold ${n.reduce((s,r)=>s+r.closed_profit_cents,0)>0?"text-green-600 dark:text-green-400":n.reduce((s,r)=>s+r.closed_profit_cents,0)<0?"text-red-600 dark:text-red-400":"text-gray-700 dark:text-gray-300"}`,children:d(n.reduce((s,r)=>s+r.closed_profit_cents,0),!0)})]}),m!==0&&e.jsxs("span",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Closed profit (system):"})," ",e.jsx("span",{className:`font-semibold ${m>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d(m,!0)})]}),e.jsxs("span",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Closed profit total:"})," ",e.jsx("span",{className:`font-semibold ${n.reduce((s,r)=>s+r.closed_profit_cents,0)+m>0?"text-green-600 dark:text-green-400":n.reduce((s,r)=>s+r.closed_profit_cents,0)+m<0?"text-red-600 dark:text-red-400":"text-gray-700 dark:text-gray-300"}`,children:d(n.reduce((s,r)=>s+r.closed_profit_cents,0)+m,!0)})]}),e.jsxs("span",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Settled profit (users):"})," ",e.jsx("span",{className:`font-semibold ${n.reduce((s,r)=>s+r.settled_profit_cents,0)>0?"text-green-600 dark:text-green-400":n.reduce((s,r)=>s+r.settled_profit_cents,0)<0?"text-red-600 dark:text-red-400":"text-gray-700 dark:text-gray-300"}`,children:d(n.reduce((s,r)=>s+r.settled_profit_cents,0),!0)})]}),u!==0&&e.jsxs("span",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Settled profit (system):"})," ",e.jsx("span",{className:`font-semibold ${u>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d(u,!0)})]}),e.jsxs("span",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Settled profit total:"})," ",e.jsx("span",{className:`font-semibold ${n.reduce((s,r)=>s+r.settled_profit_cents,0)+u===0?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400"}`,children:d(n.reduce((s,r)=>s+r.settled_profit_cents,0)+u,!0)})]}),e.jsxs("span",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Portfolio (users):"})," ",e.jsx("span",{className:`font-semibold ${t>0?"text-green-600 dark:text-green-400":t<0?"text-red-600 dark:text-red-400":"text-gray-700 dark:text-gray-300"}`,children:d(t,!0)})]}),x!==0&&e.jsxs("span",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Unattributed:"})," ",e.jsx("span",{className:`font-semibold ${x>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d(x,!0)})]}),e.jsxs("span",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total (users + unattributed):"})," ",e.jsx("span",{className:`font-semibold ${a===0?"text-gray-700 dark:text-gray-300":a>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d(a,!0)})]}),e.jsxs("span",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"System total:"})," ",e.jsx("span",{className:`font-semibold ${p===0?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400"}`,children:d(p,!0)})]})]})]})})(),e.jsx("div",{className:"hidden md:block overflow-x-auto rounded-lg border border-gray-200 dark:border-gray-600",children:e.jsxs("table",{className:"w-full min-w-[700px] border-collapse","aria-describedby":"leaderboard-caption",children:[e.jsx("caption",{id:"leaderboard-caption",className:"sr-only",children:"Admin leaderboard: per-user stats including trades, open orders, shares traded, closed profit, settled profit, and portfolio value"}),e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-800",children:[e.jsx("th",{className:"py-3 px-4 text-left text-xs font-bold text-gray-600 dark:text-gray-400",children:e.jsxs("button",{type:"button",onClick:()=>b("username"),className:"flex items-center gap-1 hover:text-primary-600 dark:hover:text-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-500 rounded","aria-sort":l==="username"?c==="asc"?"ascending":"descending":void 0,children:["User ",l==="username"&&(c==="asc"?"↑":"↓")]})}),e.jsx("th",{className:"py-3 px-4 text-right text-xs font-bold text-gray-600 dark:text-gray-400",children:e.jsxs("button",{type:"button",onClick:()=>b("trade_count"),className:"inline-flex items-center gap-1 ml-auto hover:text-primary-600 dark:hover:text-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-500 rounded","aria-sort":l==="trade_count"?c==="asc"?"ascending":"descending":void 0,children:["Trades ",l==="trade_count"&&(c==="asc"?"↑":"↓")]})}),e.jsx("th",{className:"py-3 px-4 text-right text-xs font-bold text-gray-600 dark:text-gray-400",children:e.jsxs("button",{type:"button",onClick:()=>b("open_orders_count"),className:"inline-flex items-center gap-1 ml-auto hover:text-primary-600 dark:hover:text-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-500 rounded","aria-sort":l==="open_orders_count"?c==="asc"?"ascending":"descending":void 0,children:["Open orders ",l==="open_orders_count"&&(c==="asc"?"↑":"↓")]})}),e.jsx("th",{className:"py-3 px-4 text-right text-xs font-bold text-gray-600 dark:text-gray-400",children:e.jsxs("button",{type:"button",onClick:()=>b("shares_traded"),className:"inline-flex items-center gap-1 ml-auto hover:text-primary-600 dark:hover:text-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-500 rounded","aria-sort":l==="shares_traded"?c==="asc"?"ascending":"descending":void 0,children:["Shares traded ",l==="shares_traded"&&(c==="asc"?"↑":"↓")]})}),e.jsx("th",{className:"py-3 px-4 text-right text-xs font-bold text-gray-600 dark:text-gray-400",children:e.jsxs("button",{type:"button",onClick:()=>b("closed_profit_cents"),className:"inline-flex items-center gap-1 ml-auto hover:text-primary-600 dark:hover:text-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-500 rounded","aria-sort":l==="closed_profit_cents"?c==="asc"?"ascending":"descending":void 0,children:["Closed profit ",l==="closed_profit_cents"&&(c==="asc"?"↑":"↓")]})}),e.jsx("th",{className:"py-3 px-4 text-right text-xs font-bold text-gray-600 dark:text-gray-400",children:e.jsxs("button",{type:"button",onClick:()=>b("settled_profit_cents"),className:"inline-flex items-center gap-1 ml-auto hover:text-primary-600 dark:hover:text-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-500 rounded","aria-sort":l==="settled_profit_cents"?c==="asc"?"ascending":"descending":void 0,children:["Settled profit ",l==="settled_profit_cents"&&(c==="asc"?"↑":"↓")]})}),e.jsx("th",{className:"py-3 px-4 text-right text-xs font-bold text-gray-600 dark:text-gray-400",children:e.jsxs("button",{type:"button",onClick:()=>b("portfolio_value_cents"),className:"inline-flex items-center gap-1 ml-auto hover:text-primary-600 dark:hover:text-primary-400 focus:outline-none focus:ring-2 focus:ring-primary-500 rounded","aria-sort":l==="portfolio_value_cents"?c==="asc"?"ascending":"descending":void 0,children:["Portfolio value ",l==="portfolio_value_cents"&&(c==="asc"?"↑":"↓")]})})]})}),e.jsx("tbody",{children:S.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"py-8 text-center text-gray-500 dark:text-gray-400",children:"No users."})}):S.map(t=>e.jsxs("tr",{className:"border-b border-gray-100 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800/50",children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-900 dark:text-gray-100",children:t.username}),e.jsx("td",{className:"py-3 px-4 text-right text-gray-700 dark:text-gray-300",children:t.trade_count}),e.jsx("td",{className:"py-3 px-4 text-right text-gray-700 dark:text-gray-300",children:t.open_orders_count}),e.jsx("td",{className:"py-3 px-4 text-right text-gray-700 dark:text-gray-300",children:t.shares_traded}),e.jsx("td",{className:`py-3 px-4 text-right font-medium ${t.closed_profit_cents>0?"text-green-600 dark:text-green-400":t.closed_profit_cents<0?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-gray-100"}`,children:d(t.closed_profit_cents,!0)}),e.jsx("td",{className:`py-3 px-4 text-right font-medium ${t.settled_profit_cents>0?"text-green-600 dark:text-green-400":t.settled_profit_cents<0?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-gray-100"}`,children:d(t.settled_profit_cents,!0)}),e.jsx("td",{className:`py-3 px-4 text-right font-medium ${t.portfolio_value_cents>0?"text-green-600 dark:text-green-400":t.portfolio_value_cents<0?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-gray-100"}`,children:d(t.portfolio_value_cents,!0)})]},t.user_id))}),n.length>0&&(()=>{const t=n.reduce((i,g)=>i+g.trade_count,0),a=n.reduce((i,g)=>i+g.open_orders_count,0),s=n.reduce((i,g)=>i+g.shares_traded,0),r=n.reduce((i,g)=>i+g.closed_profit_cents,0),y=n.reduce((i,g)=>i+g.settled_profit_cents,0),f=r+m,_=y+u,k=n.reduce((i,g)=>i+g.portfolio_value_cents,0),N=k+x;return e.jsxs("tfoot",{children:[e.jsxs("tr",{className:"border-t-2 border-gray-300 dark:border-gray-500 bg-gray-100 dark:bg-gray-800 font-semibold",children:[e.jsx("td",{className:"py-3 px-4 text-gray-900 dark:text-gray-100",children:"All participants"}),e.jsx("td",{className:"py-3 px-4 text-right",children:t}),e.jsx("td",{className:"py-3 px-4 text-right",children:a}),e.jsx("td",{className:"py-3 px-4 text-right",children:s}),e.jsx("td",{className:`py-3 px-4 text-right ${r>0?"text-green-600 dark:text-green-400":r<0?"text-red-600 dark:text-red-400":"text-gray-700 dark:text-gray-300"}`,children:d(r,!0)}),e.jsx("td",{className:`py-3 px-4 text-right ${y>0?"text-green-600 dark:text-green-400":y<0?"text-red-600 dark:text-red-400":"text-gray-700 dark:text-gray-300"}`,children:d(y,!0)}),e.jsx("td",{className:`py-3 px-4 text-right ${k>0?"text-green-600 dark:text-green-400":k<0?"text-red-600 dark:text-red-400":"text-gray-700 dark:text-gray-300"}`,children:d(k,!0)})]}),(m!==0||u!==0||x!==0)&&e.jsxs("tr",{className:"border-t border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-800/80 font-medium",children:[e.jsx("td",{className:"py-2 px-4 text-gray-600 dark:text-gray-400 text-xs",children:"System (no user_id or deleted user)"}),e.jsx("td",{className:"py-2 px-4 text-right",children:"—"}),e.jsx("td",{className:"py-2 px-4 text-right",children:"—"}),e.jsx("td",{className:"py-2 px-4 text-right",children:"—"}),e.jsx("td",{className:`py-2 px-4 text-right ${m>0?"text-green-600 dark:text-green-400":m<0?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:d(m,!0)}),e.jsx("td",{className:`py-2 px-4 text-right ${u>0?"text-green-600 dark:text-green-400":u<0?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:d(u,!0)}),e.jsx("td",{className:`py-2 px-4 text-right ${x>0?"text-green-600 dark:text-green-400":x<0?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"}`,children:d(x,!0)})]}),e.jsxs("tr",{className:"border-t border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-800/80 font-medium",children:[e.jsx("td",{className:"py-2 px-4 text-gray-600 dark:text-gray-400 text-xs",children:"Closed / settled total (closed may be non-zero)"}),e.jsx("td",{colSpan:3,className:"py-2 px-4"}),e.jsx("td",{className:`py-2 px-4 text-right font-semibold ${f>0?"text-green-600 dark:text-green-400":f<0?"text-red-600 dark:text-red-400":"text-gray-700 dark:text-gray-300"}`,children:d(f,!0)}),e.jsx("td",{className:`py-2 px-4 text-right font-semibold ${_===0?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400"}`,children:d(_,!0)}),e.jsx("td",{className:"py-2 px-4"})]}),e.jsxs("tr",{className:"border-t border-gray-300 dark:border-gray-500 bg-gray-100 dark:bg-gray-800 font-semibold",children:[e.jsx("td",{className:"py-3 px-4 text-gray-900 dark:text-gray-100",children:"Total (users + unattributed)"}),e.jsx("td",{colSpan:5,className:"py-3 px-4"}),e.jsx("td",{className:`py-3 px-4 text-right ${N===0?"text-gray-700 dark:text-gray-300":N>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:d(N,!0)})]}),e.jsxs("tr",{className:"border-t border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-800/80 font-medium",children:[e.jsx("td",{className:"py-2 px-4 text-gray-600 dark:text-gray-400 text-xs",children:"System total (all positions; should be $0)"}),e.jsx("td",{colSpan:5,className:"py-2 px-4"}),e.jsx("td",{className:`py-2 px-4 text-right font-semibold ${p===0?"text-green-600 dark:text-green-400":"text-amber-600 dark:text-amber-400"}`,children:d(p,!0)})]})]})})()]})})]})})}export{pe as LeaderboardPage};
