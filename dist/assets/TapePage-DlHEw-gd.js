import{r as t,j as e,b}from"./index-ctqCthlT.js";import{f as h}from"./format-CS6GGukx.js";import{f as u}from"./index-BAgxTVAR.js";const f=40;function j({showTitle:s=!0}){const[d,o]=t.useState([]),[m,n]=t.useState(!0);if(t.useEffect(()=>{async function r(){n(!0);try{const{trades:a}=await b.getTape(f);o(a??[])}catch(a){console.error("Failed to load trade tape:",a),o([])}finally{n(!1)}}r()},[]),m)return e.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-800/50 p-4",children:[s&&e.jsx("h2",{className:"text-sm font-bold text-gray-600 dark:text-gray-400 mb-3",children:"Trade tape"}),e.jsx("div",{className:"animate-pulse space-y-2",children:[1,2,3,4,5].map(r=>e.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded"},r))})]});if(d.length===0)return e.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-800/50 p-4",children:[s&&e.jsx("h2",{className:"text-sm font-bold text-gray-600 dark:text-gray-400 mb-3",children:"Trade tape"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No recent trades"})]});const i=!s;return e.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-600 bg-gray-50 dark:bg-gray-800/50 overflow-hidden",children:[s&&e.jsx("h2",{className:"text-sm font-bold text-gray-600 dark:text-gray-400 px-4 pt-3 pb-2",children:"Trade tape"}),e.jsx("div",{className:`pb-3 ${i?"pt-3":"max-h-[280px] overflow-y-auto"}`,children:e.jsx("div",{className:"space-y-0",children:d.map(r=>{const a=r.buyer_username??"—",x=r.seller_username??"—",c=r.contracts,g=c===1?"share":"shares",p=r.outcome_name||r.outcome_ticker||r.outcome||"—",l=r.market_short_name||r.market_id||"—",y=r.create_time?u(new Date(r.create_time*1e3),"M/d h:mm a"):"—";return e.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 last:border-0 overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-2.5 text-xs sm:text-sm text-gray-900 dark:text-gray-100",children:[e.jsx("span",{className:"font-medium text-green-600 dark:text-green-400",children:a})," bought ",c," ",g," of ",p," at ",h(r.price)," from"," ",e.jsx("span",{className:"font-medium text-red-600 dark:text-red-400",children:x}),"."]}),e.jsxs("div",{className:"px-4 py-1.5 bg-gray-100 dark:bg-gray-700/50 text-xs text-gray-600 dark:text-gray-400 flex items-center justify-between gap-2",children:[e.jsx("span",{className:"truncate min-w-0",title:l,children:l}),e.jsx("span",{className:"whitespace-nowrap flex-shrink-0",children:y})]})]},r.id)})})})]})}function T(){return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:"Trade tape"}),e.jsx(j,{showTitle:!1})]})}export{T as TapePage};
