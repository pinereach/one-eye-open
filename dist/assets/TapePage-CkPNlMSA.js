import{r as i,j as e,L as M,b as T}from"./index-B_K5LKJK.js";import{f as L}from"./format-Cpou_ref.js";import{f as k}from"./index-BAgxTVAR.js";const S=20,b=["#2563eb","#16a34a","#dc2626","#d97706","#7c3aed","#0d9488","#db2777","#4f46e5","#059669","#ea580c","#0891b2","#c026d3","#e11d48","#0284c7","#65a30d","#9333ea","#0e7490","#c2410c","#0f766e","#be185d","#ca8a04","#1d4ed8","#15803d","#b91c1c"];function C(a){let t=0;for(let s=0;s<a.length;s++)t=(t<<5)-t+a.charCodeAt(s)|0;return Math.abs(t)}function u(a){if(!(!a||a==="—"))return b[C(a)%b.length]}function P(a){const t=Math.floor(Date.now()/1e3-a);if(t<10)return"Just now";if(t<60)return`${t}s ago`;const s=Math.floor(t/60);if(s<60)return`${s}m ago`;const d=Math.floor(s/60);return d<24?`${d}h ago`:k(new Date(a*1e3),"M/d h:mm a")}function R({showTitle:a=!0}){const[t,s]=i.useState([]),[d,l]=i.useState(!0);if(i.useEffect(()=>{async function r(){l(!0);try{const{trades:o}=await T.getTape(S);s(o??[])}catch(o){console.error("Failed to load trade tape:",o),s([])}finally{l(!1)}}r()},[]),d)return e.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800/80 shadow-sm p-4",children:[a&&e.jsx("h2",{className:"text-sm font-bold text-gray-600 dark:text-gray-400 mb-3",children:"Trade tape"}),e.jsx("div",{className:"animate-pulse space-y-2",children:[1,2,3,4,5,6,7].map(r=>e.jsx("div",{className:"h-10 bg-gray-200 dark:bg-gray-700 rounded border border-gray-100 dark:border-gray-700"},r))})]});if(t.length===0)return e.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800/80 shadow-sm p-6",children:[a&&e.jsx("h2",{className:"text-sm font-bold text-gray-600 dark:text-gray-400 mb-3",children:"Trade tape"}),e.jsxs("div",{className:"flex flex-col items-center justify-center py-10 text-center",children:[e.jsx("svg",{className:"w-10 h-10 text-gray-300 dark:text-gray-600 mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":!0,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No recent trades"}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:"Trades will appear here as they happen"})]})]});const j=!a;return e.jsxs("div",{className:"rounded-lg border border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-800/80 shadow-sm overflow-hidden",children:[a&&e.jsx("h2",{className:"text-sm font-bold text-gray-600 dark:text-gray-400 px-4 pt-3 pb-2",children:"Trade tape"}),e.jsx("div",{className:`px-3 sm:px-4 ${j?"py-3":"py-2 max-h-[280px] overflow-y-auto"}`,children:e.jsx("div",{className:"space-y-3",children:t.map(r=>{const o=r.buyer_username??"—",m=r.seller_username??"—",n=(r.taker_side??r.side??0)===0,x=n?o:m,h=n?m:o,g=u(x),y=u(h),f=r.contracts,N=r.outcome_name||r.outcome_ticker||r.outcome||"—",c=r.market_id??"",p=c==="market_total_birdies"?"market-total-birdies":c,v=r.market_short_name||(c==="market_total_birdies"?"Total Birdies (6R)":c)||"—",_=r.create_time?P(r.create_time):"—",w=L(r.price);return e.jsxs(M,{to:p?`/markets/${p}`:"#",className:"block py-2.5 px-3 rounded border border-transparent hover:border-gray-200 dark:hover:border-gray-600 hover:bg-gray-50/80 dark:hover:bg-gray-700/30 transition-colors touch-manipulation group",children:[e.jsxs("div",{className:"text-sm text-gray-900 dark:text-gray-100",children:[e.jsx("span",{className:"font-semibold",style:g?{color:g}:void 0,children:x})," ",n?"bought":"sold"," ",e.jsxs("span",{className:"font-semibold",children:[f," ",f===1?"share":"shares"]})," of ",e.jsx("span",{className:"font-medium",children:N}),n?" from ":" to ",e.jsx("span",{className:"font-semibold",style:y?{color:y}:void 0,children:h})," @ ",e.jsx("span",{className:"font-bold",children:w})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",title:r.create_time?k(new Date(r.create_time*1e3),"MMM d, h:mm a"):void 0,children:["on ",v," ",_]})]},r.id)})})})]})}function B(){return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Trade tape"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Recent activity across all markets"})]}),e.jsx(R,{showTitle:!1})]})}export{B as TapePage};
