import{r as d,b as N,j as e,L as w}from"./index-Ca-ZKz1e.js";import{P as v}from"./PullToRefresh-CH5PDhBr.js";import{f as S,b as g,e as _}from"./format-CS6GGukx.js";import{E as T}from"./EmptyState-BVx2Jnq2.js";import{S as $,a as z,b as P}from"./Skeleton-Cgagk02Y.js";import{f as y}from"./index-BAgxTVAR.js";function I(){const[a,h]=d.useState([]),[b,o]=d.useState(!0);d.useEffect(()=>{c()},[]);async function c(){o(!0);try{const{trades:t}=await N.getAllTrades(100);h(t)}catch(t){console.error("Failed to load trades:",t)}finally{o(!1)}}const i=(t,r)=>{const s=t/100;return Math.round(r*(100-s))},l=(t,r)=>{const s=t/100;return Math.round(r*(0-s))},k=t=>{const r=t.side??t.taker_side,s=r===1,x=s?"Sell":"Buy",n=t.price?_(t.price):"0.0%",p=t.contracts===1?"share":"shares",f=s?`Sold ${t.contracts} ${p} at ${n}`:`Bought ${t.contracts} ${p} at ${n}`,j=g(t.price,t.contracts,r??0),u=t.create_time?y(new Date(t.create_time*1e3),"M/d, h:mm a"):"—";return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 mb-2 border border-gray-300 dark:border-gray-600",children:[e.jsx("span",{className:`inline-block font-bold text-xs sm:text-sm uppercase tracking-wide mb-1.5 px-2 py-0.5 rounded-md ${s?"bg-red-500 text-white":"bg-primary-500 text-white"}`,"aria-label":`${x} trade`,children:x}),e.jsxs("div",{className:"flex items-center justify-between gap-4 mb-1",children:[e.jsx("h3",{className:"font-bold text-sm sm:text-base text-gray-900 dark:text-gray-100",children:t.market_short_name||t.market_id||"—"}),e.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100 flex-shrink-0",children:j})]}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-0.5",children:t.outcome_name||t.outcome||"—"}),e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:f}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex-shrink-0",children:u})]})]})]},t.id)};if(b)return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx($,{variant:"text",width:"200px",height:"32px"}),e.jsx("div",{className:"md:hidden space-y-3",children:[1,2,3].map(t=>e.jsx(z,{},t))}),e.jsx("div",{className:"hidden md:block",children:e.jsx(P,{rows:5,cols:8})})]});const m=e.jsx(T,{icon:e.jsx("svg",{className:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),title:"No Trades Yet",message:"Your executed trades will appear here once you start trading.",action:e.jsx(w,{to:"/markets",className:"text-primary-600 dark:text-primary-400 font-medium hover:underline",children:"Browse markets"})});return e.jsx(v,{onRefresh:c,children:e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:"Trades"}),e.jsx("div",{className:"md:hidden space-y-2",children:a.length===0?m:a.map(k)}),e.jsx("div",{className:"hidden md:block overflow-x-auto -mx-3 sm:mx-0",children:a.length===0?m:e.jsx("div",{className:"inline-block min-w-full align-middle",children:e.jsxs("table",{className:"w-full min-w-[1000px] border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-300 dark:border-gray-600",children:[e.jsx("th",{className:"py-3 px-2 sm:px-3 text-left text-xs sm:text-sm font-bold text-gray-600 dark:text-gray-400 sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-300 dark:border-gray-600",children:"Time"}),e.jsx("th",{className:"py-3 px-2 sm:px-3 text-left text-xs sm:text-sm font-bold text-gray-600 dark:text-gray-400 sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-300 dark:border-gray-600",children:"Side"}),e.jsx("th",{className:"py-3 px-2 sm:px-3 text-left text-xs sm:text-sm font-bold text-gray-600 dark:text-gray-400 sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-300 dark:border-gray-600",children:"Market"}),e.jsx("th",{className:"py-3 px-2 sm:px-3 text-left text-xs sm:text-sm font-bold text-gray-600 dark:text-gray-400 sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-300 dark:border-gray-600",children:"Outcome"}),e.jsx("th",{className:"py-3 px-2 sm:px-3 text-right text-xs sm:text-sm font-bold text-gray-600 dark:text-gray-400 sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-300 dark:border-gray-600",children:"Price"}),e.jsx("th",{className:"py-3 px-2 sm:px-3 text-right text-xs sm:text-sm font-bold text-gray-600 dark:text-gray-400 sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-300 dark:border-gray-600",children:"Contracts"}),e.jsx("th",{className:"py-3 px-2 sm:px-3 text-right text-xs sm:text-sm font-bold text-gray-600 dark:text-gray-400 sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-300 dark:border-gray-600",children:"Notional Value"}),e.jsx("th",{className:"py-3 px-2 sm:px-3 text-right text-xs sm:text-sm font-bold text-gray-600 dark:text-gray-400 sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-300 dark:border-gray-600",children:"If 0"}),e.jsx("th",{className:"py-3 px-2 sm:px-3 text-right text-xs sm:text-sm font-bold text-gray-600 dark:text-gray-400 sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-300 dark:border-gray-600",children:"If 100"})]})}),e.jsx("tbody",{children:a.map(t=>{const r=t.side??t.taker_side??null,s=r===1,x=r===0?"Buy":r===1?"Sell":"—";return e.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800",children:[e.jsx("td",{className:"py-3 px-2 sm:px-3 text-xs sm:text-sm whitespace-nowrap",children:t.create_time?y(new Date(t.create_time*1e3),"MMM d, h:mm a"):"—"}),e.jsx("td",{className:"py-3 px-2 sm:px-3",children:e.jsx("span",{className:`inline-block font-bold text-xs uppercase px-2 py-0.5 rounded ${s?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"}`,children:x})}),e.jsx("td",{className:"py-3 px-2 sm:px-3 text-xs sm:text-sm",children:t.market_short_name||t.market_id||"—"}),e.jsx("td",{className:"py-3 px-2 sm:px-3 text-xs sm:text-sm",children:e.jsx("span",{className:"font-medium",children:t.outcome_name||"—"})}),e.jsx("td",{className:"py-3 px-2 sm:px-3 text-right font-medium text-xs sm:text-sm",children:S(t.price)}),e.jsx("td",{className:"py-3 px-2 sm:px-3 text-right text-xs sm:text-sm",children:t.contracts}),e.jsx("td",{className:"py-3 px-2 sm:px-3 text-right font-medium text-xs sm:text-sm",children:g(t.price,t.contracts,r??0)}),e.jsxs("td",{className:`py-3 px-2 sm:px-3 text-right text-xs sm:text-sm font-bold ${l(t.price,t.contracts)>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["$",l(t.price,t.contracts)]}),e.jsxs("td",{className:`py-3 px-2 sm:px-3 text-right text-xs sm:text-sm font-bold ${i(t.price,t.contracts)>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["$",i(t.price,t.contracts)]})]},t.id)})})]})})})]})})}export{I as TradesPage};
