import{r as n,j as t}from"./index-Ca-ZKz1e.js";const x=80,T=120;function j({onRefresh:l,enabled:s=!0}){const[r,c]=n.useState(0),[e,o]=n.useState(!1),a=n.useRef(0),i=n.useRef(0),u=n.useCallback(d=>{!s||e||(a.current=d.touches[0].clientY,i.current=typeof document<"u"?document.documentElement.scrollTop:0)},[s,e]),h=n.useCallback(d=>{if(!s||e||!(typeof document<"u"&&document.documentElement.scrollTop<=5))return;const f=d.touches[0].clientY-a.current;if(f>0){const p=Math.min(f*.5,T);c(p)}},[s,e]),m=n.useCallback(async()=>{if(!(!s||e))if(r>=x){o(!0),c(0);try{await Promise.resolve(l())}finally{o(!1)}}else c(0)},[s,e,r,l]);return{pullDistance:r,refreshing:e,handleTouchStart:u,handleTouchMove:h,handleTouchEnd:m}}function E({onRefresh:l,children:s,className:r="",mobileOnly:c=!0}){const{pullDistance:e,refreshing:o,handleTouchStart:a,handleTouchMove:i,handleTouchEnd:u}=j({onRefresh:l,enabled:!0}),h=(e>0||o)&&c;return t.jsxs("div",{className:`relative ${r}`,onTouchStart:a,onTouchMove:i,onTouchEnd:u,children:[h&&t.jsx("div",{className:"md:hidden absolute left-0 right-0 top-0 flex justify-center pt-2 pb-1 z-10 pointer-events-none",children:t.jsx("div",{className:"flex items-center gap-2 text-primary-600 dark:text-primary-400 text-sm font-medium",children:o?t.jsxs(t.Fragment,{children:[t.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24","aria-hidden":"true",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),t.jsx("span",{children:"Refreshingâ€¦"})]}):t.jsx("span",{children:e>=80?"Release to refresh":"Pull to refresh"})})}),s]})}export{E as P};
