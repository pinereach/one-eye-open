import{r as t,u as b,j as e,a as h,i as f,N as y}from"./index-TzOn1TcA.js";function v({onSuccess:l,onSwitchToRegister:r}){const[a,d]=t.useState(""),s=t.useRef(null),[n,i]=t.useState(""),[m,u]=t.useState(!1),{login:x}=b();async function p(c){c.preventDefault(),i(""),u(!0);const o=s.current?.value??"";try{await x(a.trim(),o.trim()),l?.()}catch(g){i(g instanceof Error?g.message:"Login failed")}finally{u(!1)}}return e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium mb-1.5",children:"Username"}),e.jsx("input",{id:"username",type:"text",value:a,onChange:c=>d(c.target.value),required:!0,autoComplete:"username",className:"w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 min-h-[44px]","aria-describedby":n?"login-error":void 0,"aria-invalid":!!n})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-1.5",children:"Password"}),e.jsx("input",{ref:s,id:"password",type:"password",required:!0,autoComplete:"current-password",className:"w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 min-h-[44px]"})]}),n&&e.jsx("div",{id:"login-error",className:"text-red-600 dark:text-red-400 text-sm",role:"alert",children:n}),e.jsx("button",{type:"submit",disabled:m,className:"w-full bg-primary-600 hover:bg-primary-700 active:bg-primary-800 text-white font-medium py-3 px-4 rounded-md disabled:opacity-50 min-h-[44px] text-base touch-manipulation",children:m?"Logging in...":"Login"}),r&&e.jsx("button",{type:"button",onClick:r,className:"w-full text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200",children:"Don't have an account? Register"})]})}function w({onSuccess:l,onSwitchToLogin:r}){const[a,d]=t.useState(""),[s,n]=t.useState(""),[i,m]=t.useState(""),[u,x]=t.useState(!1),{register:p}=b();async function c(o){o.preventDefault(),m(""),x(!0);try{await p(a.trim(),s.trim()),l?.()}catch(g){m(g.message||"Registration failed")}finally{x(!1)}}return e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"register-username",className:"block text-sm font-medium mb-1.5",children:"Username"}),e.jsx("input",{id:"register-username",type:"text",value:a,onChange:o=>d(o.target.value),required:!0,autoComplete:"username",className:"w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 min-h-[44px]","aria-describedby":i?"register-error":void 0,"aria-invalid":!!i})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-1.5",children:"Password"}),e.jsx("input",{id:"password",type:"password",value:s,onChange:o=>n(o.target.value),required:!0,autoComplete:"new-password",className:"w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 min-h-[44px]"})]}),i&&e.jsx("div",{id:"register-error",className:"text-red-600 dark:text-red-400 text-sm",role:"alert",children:i}),e.jsx("button",{type:"submit",disabled:u,className:"w-full bg-primary-600 hover:bg-primary-700 active:bg-primary-800 text-white font-medium py-3 px-4 rounded-md disabled:opacity-50 min-h-[44px] text-base touch-manipulation",children:u?"Registering...":"Register"}),r&&e.jsx("button",{type:"button",onClick:r,className:"w-full text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200",children:"Already have an account? Login"})]})}function k(){const{user:l}=b(),[r,a]=t.useState(!1),d=h(),s=t.useRef(null);return t.useEffect(()=>{s.current?.querySelector("input")?.focus()},[r]),f?e.jsx(y,{to:"/markets",replace:!0}):l?e.jsx(y,{to:"/markets",replace:!0}):e.jsxs("div",{className:"max-w-md mx-auto px-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-center mb-2 sm:mb-3",children:"One Eye Open"}),e.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400 text-sm sm:text-base mb-6 sm:mb-8",children:"Prediction markets for the trip"}),e.jsx("div",{ref:s,children:r?e.jsx(w,{onSuccess:()=>d("/markets"),onSwitchToLogin:()=>a(!1)}):e.jsx(v,{onSuccess:()=>d("/markets"),onSwitchToRegister:()=>a(!0)})})]})}export{k as LandingPage};
