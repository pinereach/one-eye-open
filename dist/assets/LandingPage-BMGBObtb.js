import{r,u as b,j as e,a as h,i as f,N as y}from"./index-nBe7qx8B.js";function v({onSuccess:l,onSwitchToRegister:a}){const[s,d]=r.useState(""),i=r.useRef(null),[t,n]=r.useState(""),[m,u]=r.useState(!1),{login:x}=b();async function p(c){c.preventDefault(),n(""),u(!0);const o=i.current?.value??"";try{await x(s.trim(),o.trim()),l?.()}catch(g){n(g instanceof Error?g.message:"Login failed")}finally{u(!1)}}return e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium mb-1.5",children:"Username"}),e.jsx("input",{id:"username",type:"text",value:s,onChange:c=>d(c.target.value),required:!0,autoComplete:"username",className:"w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 min-h-[44px]","aria-describedby":t?"login-error":void 0,"aria-invalid":!!t})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-1.5",children:"Password"}),e.jsx("input",{ref:i,id:"password",type:"password",required:!0,autoComplete:"current-password",className:"w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 min-h-[44px]","aria-describedby":t?"login-error":void 0,"aria-invalid":!!t})]}),t&&e.jsx("div",{id:"login-error",className:"text-red-600 dark:text-red-400 text-sm",role:"alert",children:t}),e.jsx("button",{type:"submit",disabled:m,className:"w-full bg-primary-600 hover:bg-primary-700 active:bg-primary-800 text-white font-medium py-3 px-4 rounded-md disabled:opacity-50 min-h-[44px] text-base touch-manipulation",children:m?"Logging in...":"Login"}),a&&e.jsx("button",{type:"button",onClick:a,className:"w-full text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200",children:"Don't have an account? Register"})]})}function w({onSuccess:l,onSwitchToLogin:a}){const[s,d]=r.useState(""),[i,t]=r.useState(""),[n,m]=r.useState(""),[u,x]=r.useState(!1),{register:p}=b();async function c(o){o.preventDefault(),m(""),x(!0);try{await p(s,i),l?.()}catch(g){m(g.message||"Registration failed")}finally{x(!1)}}return e.jsxs("form",{onSubmit:c,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"register-username",className:"block text-sm font-medium mb-1.5",children:"Username"}),e.jsx("input",{id:"register-username",type:"text",value:s,onChange:o=>d(o.target.value),required:!0,autoComplete:"username",className:"w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 min-h-[44px]","aria-describedby":n?"register-error":void 0,"aria-invalid":!!n})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium mb-1.5",children:"Password"}),e.jsx("input",{id:"password",type:"password",value:i,onChange:o=>t(o.target.value),required:!0,autoComplete:"new-password",className:"w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 min-h-[44px]"})]}),n&&e.jsx("div",{id:"register-error",className:"text-red-600 dark:text-red-400 text-sm",role:"alert",children:n}),e.jsx("button",{type:"submit",disabled:u,className:"w-full bg-primary-600 hover:bg-primary-700 active:bg-primary-800 text-white font-medium py-3 px-4 rounded-md disabled:opacity-50 min-h-[44px] text-base touch-manipulation",children:u?"Registering...":"Register"}),a&&e.jsx("button",{type:"button",onClick:a,className:"w-full text-sm text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200",children:"Already have an account? Login"})]})}function k(){const{user:l}=b(),[a,s]=r.useState(!1),d=h(),i=r.useRef(null);return r.useEffect(()=>{i.current?.querySelector("input")?.focus()},[a]),f?e.jsx(y,{to:"/markets",replace:!0}):l?e.jsx(y,{to:"/markets",replace:!0}):e.jsxs("div",{className:"max-w-md mx-auto px-4",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-center mb-2 sm:mb-3",children:"One Eye Open"}),e.jsx("p",{className:"text-center text-gray-600 dark:text-gray-400 text-sm sm:text-base mb-6 sm:mb-8",children:"Prediction markets for the trip"}),e.jsx("div",{ref:i,children:a?e.jsx(w,{onSuccess:()=>d("/markets"),onSwitchToLogin:()=>s(!1)}):e.jsx(v,{onSuccess:()=>d("/markets"),onSwitchToRegister:()=>s(!0)})})]})}export{k as LandingPage};
