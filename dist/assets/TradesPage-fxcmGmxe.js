import{a as z,r as c,g as P,b as C,j as t,S as D,e as E,f as I,L as B}from"./index-Bn4Y-oNW.js";import{u as L}from"./useMarketTypeFilter-BmQ6mNNl.js";import{P as F}from"./PullToRefresh-YjT9XZMD.js";import{f as O,c as u,g as R}from"./format-BckxrTVz.js";import{E as K}from"./EmptyState-B2TPZwXm.js";import{f as j}from"./index-BAgxTVAR.js";import"./marketTypes-2i-psQO1.js";function G(){const i=z(),[x,N]=c.useState([]),[v,m]=c.useState(!0),{selectedMarketType:p,setSelectedMarketType:w,filteredItems:g,filterOptions:_}=L(x,e=>e.market_type??"other"),{clearUnread:y}=P();c.useEffect(()=>{h()},[]),c.useEffect(()=>{y()},[y]);async function h(){m(!0);try{const{trades:e}=await C.getAllTrades(100);N(e)}catch(e){console.error("Failed to load trades:",e)}finally{m(!1)}}const b=(e,r)=>{const s=e/100;return Math.round(r*(100-s))},k=(e,r)=>{const s=e/100;return Math.round(r*(0-s))},$=e=>{const r=e.side??e.taker_side,s=r===1,n=s?"Sell":"Buy",a=e.price?R(e.price):"0.0%",o=e.contracts===1?"share":"shares",T=s?`Sold ${e.contracts} ${o} at ${a}`:`Bought ${e.contracts} ${o} at ${a}`,S=u(e.price,e.contracts,r??0),M=e.create_time?j(new Date(e.create_time*1e3),"M/d, h:mm a"):"—",d=!!e.market_id;return t.jsxs("div",{role:d?"button":void 0,tabIndex:d?0:void 0,onClick:d?()=>i(`/markets/${e.market_id}`):void 0,onKeyDown:d?l=>{(l.key==="Enter"||l.key===" ")&&(l.preventDefault(),i(`/markets/${e.market_id}`))}:void 0,className:`bg-white dark:bg-gray-800 rounded-lg p-3 mb-2 border border-gray-300 dark:border-gray-600 ${d?"cursor-pointer hover:border-primary-500 dark:hover:border-primary-400 transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800":""}`,children:[t.jsx("span",{className:`inline-block font-bold text-xs sm:text-sm uppercase tracking-wide mb-1.5 px-2 py-0.5 rounded-md ${s?"bg-red-500 text-white":"bg-primary-500 text-white"}`,"aria-label":`${n} trade`,children:n}),t.jsxs("div",{className:"flex items-center justify-between gap-4 mb-1",children:[t.jsx("h3",{className:"font-bold text-sm sm:text-base text-gray-900 dark:text-gray-100",children:e.market_short_name||e.market_id||"—"}),t.jsx("p",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-gray-100 flex-shrink-0",children:S})]}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-0.5",children:e.outcome_name||e.outcome||"—"}),t.jsxs("div",{className:"flex items-center justify-between gap-4",children:[t.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:T}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex-shrink-0",children:M})]})]})]},e.id)};if(v)return t.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[t.jsx(D,{variant:"text",width:"200px",height:"32px"}),t.jsx("div",{className:"md:hidden space-y-3",children:[1,2,3].map(e=>t.jsx(E,{},e))}),t.jsx("div",{className:"hidden md:block",children:t.jsx(I,{rows:5,cols:8})})]});const f=t.jsx(K,{icon:t.jsx("svg",{className:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),title:"No Trades Yet",message:"Your executed trades will appear here once you start trading.",action:t.jsx(B,{to:"/markets",className:"text-primary-600 dark:text-primary-400 font-medium hover:underline",children:"Browse markets"})});return t.jsx(F,{onRefresh:h,children:t.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[t.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:"Trades"}),x.length>0&&t.jsxs("div",{className:"space-y-2",role:"group","aria-label":"Filter by market type",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 block",children:"Market type"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:_.map(e=>t.jsx("button",{type:"button",onClick:()=>w(e.value),"aria-pressed":p===e.value,className:`min-h-[32px] px-2.5 py-1 rounded-full text-xs font-medium touch-manipulation transition-colors ${p===e.value?"bg-primary-600 text-white dark:bg-primary-500":"bg-gray-200 text-gray-700 hover:bg-gray-300 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500"}`,children:e.label},e.value))})]}),t.jsx("div",{className:"md:hidden space-y-2",children:x.length===0?f:g.map($)}),t.jsx("div",{className:"hidden md:block overflow-x-auto -mx-3 sm:mx-0",children:x.length===0?f:t.jsx("div",{className:"inline-block min-w-full align-middle",children:t.jsxs("table",{className:"w-full min-w-[1000px] border-collapse",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-gray-300 dark:border-gray-600",children:[t.jsx("th",{className:"py-3 px-2 sm:px-3 text-left text-xs sm:text-sm font-bold text-gray-600 dark:text-gray-400 sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-300 dark:border-gray-600",children:"Time"}),t.jsx("th",{className:"py-3 px-2 sm:px-3 text-left text-xs sm:text-sm font-bold text-gray-600 dark:text-gray-400 sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-300 dark:border-gray-600",children:"Side"}),t.jsx("th",{className:"py-3 px-2 sm:px-3 text-left text-xs sm:text-sm font-bold text-gray-600 dark:text-gray-400 sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-300 dark:border-gray-600",children:"Market"}),t.jsx("th",{className:"py-3 px-2 sm:px-3 text-left text-xs sm:text-sm font-bold text-gray-600 dark:text-gray-400 sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-300 dark:border-gray-600",children:"Outcome"}),t.jsx("th",{className:"py-3 px-2 sm:px-3 text-right text-xs sm:text-sm font-bold text-gray-600 dark:text-gray-400 sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-300 dark:border-gray-600",children:"Price"}),t.jsx("th",{className:"py-3 px-2 sm:px-3 text-right text-xs sm:text-sm font-bold text-gray-600 dark:text-gray-400 sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-300 dark:border-gray-600",children:"Contracts"}),t.jsx("th",{className:"py-3 px-2 sm:px-3 text-right text-xs sm:text-sm font-bold text-gray-600 dark:text-gray-400 sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-300 dark:border-gray-600",children:"Notional Value"}),t.jsx("th",{className:"py-3 px-2 sm:px-3 text-right text-xs sm:text-sm font-bold text-gray-600 dark:text-gray-400 sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-300 dark:border-gray-600",children:"If 0"}),t.jsx("th",{className:"py-3 px-2 sm:px-3 text-right text-xs sm:text-sm font-bold text-gray-600 dark:text-gray-400 sticky top-0 z-10 bg-white dark:bg-gray-900 border-b border-gray-300 dark:border-gray-600",children:"If 100"})]})}),t.jsx("tbody",{children:g.map(e=>{const r=e.side??e.taker_side??null,s=r===1,n=r===0?"Buy":r===1?"Sell":"—",a=!!e.market_id;return t.jsxs("tr",{role:a?"button":void 0,tabIndex:a?0:void 0,onClick:a?()=>i(`/markets/${e.market_id}`):void 0,onKeyDown:a?o=>{(o.key==="Enter"||o.key===" ")&&(o.preventDefault(),i(`/markets/${e.market_id}`))}:void 0,className:`border-b border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-800 ${a?"cursor-pointer":""}`,children:[t.jsx("td",{className:"py-3 px-2 sm:px-3 text-xs sm:text-sm whitespace-nowrap",children:e.create_time?j(new Date(e.create_time*1e3),"MMM d, h:mm a"):"—"}),t.jsx("td",{className:"py-3 px-2 sm:px-3",children:t.jsx("span",{className:`inline-block font-bold text-xs uppercase px-2 py-0.5 rounded ${s?"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300":"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300"}`,children:n})}),t.jsx("td",{className:"py-3 px-2 sm:px-3 text-xs sm:text-sm",children:e.market_short_name||e.market_id||"—"}),t.jsx("td",{className:"py-3 px-2 sm:px-3 text-xs sm:text-sm",children:t.jsx("span",{className:"font-medium",children:e.outcome_name||"—"})}),t.jsx("td",{className:"py-3 px-2 sm:px-3 text-right font-medium text-xs sm:text-sm",children:O(e.price)}),t.jsx("td",{className:"py-3 px-2 sm:px-3 text-right text-xs sm:text-sm",children:e.contracts}),t.jsx("td",{className:"py-3 px-2 sm:px-3 text-right font-medium text-xs sm:text-sm",children:u(e.price,e.contracts,r??0)}),t.jsxs("td",{className:`py-3 px-2 sm:px-3 text-right text-xs sm:text-sm font-bold ${k(e.price,e.contracts)>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["$",k(e.price,e.contracts)]}),t.jsxs("td",{className:`py-3 px-2 sm:px-3 text-right text-xs sm:text-sm font-bold ${b(e.price,e.contracts)>0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["$",b(e.price,e.contracts)]})]},e.id)})})]})})})]})})}export{G as TradesPage};
