import{r as o,b as N,j as e,L,c as w}from"./index-ctqCthlT.js";import{P as M}from"./PullToRefresh-JQ5slNZt.js";function _(s){return s.includes("team-champion")||s.includes("champion")&&!s.includes("individual")?e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}):s.includes("individual")&&(s.includes("net")||s.includes("gross"))?e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}):s.includes("round")||s.includes("ou")?e.jsxs("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M12 4v8M8 8h8"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M8 16h8"})]}):s.includes("birdies")||s.includes("birdie")?e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}):s.includes("h2h")||s.includes("matchup")?e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})}):s.includes("hole-in-one")||s.includes("hio")?e.jsxs("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10",strokeWidth:2}),e.jsx("circle",{cx:"12",cy:"12",r:"3",strokeWidth:2})]}):e.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}function C({tripId:s}){const[a,k]=o.useState([]),[g,u]=o.useState(!0),[x,h]=o.useState(null),[v,m]=o.useState(0);o.useEffect(()=>{i()},[s]);async function i(r=!1){r||(u(!0),h(null));try{const{markets:t}=await N.getMarkets();k(t),h(null),m(0)}catch(t){console.error("Failed to load markets:",t);const n=t?.message||"Failed to load markets";h(n),v===0&&setTimeout(()=>{m(1),i(!0)},2e3)}finally{u(!1)}}function j(r){return r&&{team_champion:"Team",individual_champion:"Individual",round_ou:"Round Over/Under",total_birdies:"Totals",h2h_matchups:"Head-to-Head",hole_in_one:"Special Events"}[r]||"Other"}const l=a.reduce((r,t)=>{const n=t.market_type||"other";return r[n]||(r[n]=[]),r[n].push(t),r},{}),p=["team_champion","individual_champion","round_ou","total_birdies","h2h_matchups","hole_in_one","other"],y=p.filter(r=>l[r]?.length>0),f=Object.keys(l).filter(r=>!p.includes(r)&&l[r]?.length>0),b=[...y,...f];let c;return g&&a.length===0?c=e.jsx("div",{className:"text-center py-8",children:"Loading markets..."}):x&&a.length===0?c=e.jsxs("div",{className:"text-center py-8",children:[e.jsxs("div",{className:"text-red-600 dark:text-red-400 mb-4",children:[e.jsx("p",{className:"font-semibold",children:"Error loading markets"}),e.jsx("p",{className:"text-sm mt-2",children:x})]}),e.jsx("button",{onClick:()=>i(),className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 transition-colors",children:"Retry"})]}):c=e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[b.map(r=>{const t=l[r],n=j(r);return e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx("h2",{className:"text-base sm:text-lg font-bold text-gray-900 dark:text-gray-100 border-b border-gray-300 dark:border-gray-600 pb-1.5",children:n}),e.jsx("div",{className:"grid gap-2 sm:gap-3",children:t.map(d=>e.jsxs(L,{to:`/markets/${d.market_id}`,className:"flex items-center gap-2 sm:gap-3 p-3 sm:p-4 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-800 hover:border-primary-500 dark:hover:border-primary-400 hover:shadow-md transition-all cursor-pointer touch-manipulation active:bg-gray-100 dark:active:bg-gray-700 active:scale-[0.98]",children:[e.jsx("div",{className:"flex-shrink-0 text-primary-600 dark:text-primary-400",children:e.jsx("div",{className:"w-8 h-8 sm:w-7 sm:h-7",children:_(d.market_id)})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h3",{className:"font-bold text-sm sm:text-base text-gray-900 dark:text-gray-100 truncate",children:d.short_name})}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]},d.id))})]},r)}),a.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:"No markets found"})]}),e.jsx(M,{onRefresh:()=>i(!0),children:c})}function T(){const s=w();return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h1",{className:"text-xl sm:text-2xl font-bold",children:"Markets"})}),e.jsx(C,{},s.key)]})}export{T as MarketsPage};
